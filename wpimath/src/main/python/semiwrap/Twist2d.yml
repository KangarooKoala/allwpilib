extra_includes:
- wpystruct.h

classes:
  wpi::math::Twist2d:
    force_no_default_constructor: true
    attributes:
      dx:
      dy:
      dtheta:
    methods:
      operator==:
      operator*:
      Exp:

inline_code: |
  cls_Twist2d
    .def(
      py::init<wpi::units::meters<>, wpi::units::meters<>, wpi::units::radians<>>(),
      py::arg("dx") = 0, py::arg("dy") = 0, py::arg("dtheta") = 0
    )
    .def_static("fromFeet", [](wpi::units::feet<> dx, wpi::units::feet<> dy, wpi::units::radians<> dtheta){
      return Twist2d{dx, dy, dtheta};
    }, py::arg("dx") = 0, py::arg("dy") = 0, py::arg("dtheta") = 0)
    .def_property("dx_feet", 
      [](Twist2d * self) -> wpi::units::feet<> {
        return self->dx;
      },
      [](Twist2d * self, wpi::units::feet<> dx) {
        self->dx = dx;
      }
    )
    .def_property("dy_feet", 
      [](Twist2d * self) -> wpi::units::feet<> {
        return self->dy;
      },
      [](Twist2d * self, wpi::units::feet<> dy) {
        self->dy = dy;
      }
    )
    .def_property("dtheta_degrees", 
      [](Twist2d * self) -> wpi::units::degrees<> {
        return self->dtheta;
      },
      [](Twist2d * self, wpi::units::degrees<> dtheta) {
        self->dtheta = dtheta;
      }
    )
    .def("__repr__", [](const Twist2d &tw) -> std::string {
      return "Twist2d(dx=" + std::to_string(tw.dx.value()) + ", "
                     "dy=" + std::to_string(tw.dy.value()) + ", "
                     "dtheta=" + std::to_string(tw.dtheta.value()) + ")";
    })
  ;

  SetupWPyStruct<wpi::math::Twist2d>(cls_Twist2d);
